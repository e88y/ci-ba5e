if(typeof jQuery==='undefined'){throw new Error('This JavaScript requires jQuery');}$.app={baseUrl:baseUrl,options:{ajaxDataType:'json',ajaxMethod:'POST',ajaxHandleResultErrors:false},cookie:{},sessionStorage:undefined,localStorage:undefined};$.app.animateCSS=function(element,animationName,callback){const node=document.querySelector(element)node.classList.add('animated',animationName)function handleAnimationEnd(){node.classList.remove('animated',animationName) node.removeEventListener('animationend webkitAnimationEnd oanimationend msAnimationEnd',handleAnimationEnd) if(typeof callback==='function') callback()} node.addEventListener('animationend',handleAnimationEnd)};$.app.escapeHtml=function(text){var map={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'};return text.replace(/[&<>"']/g,function(m){return map[m];});} $.app.update_browser_url=function(new_url,title){if(typeof title==='undefined'){title="";} if(typeof new_url==='undefined'){$.app.toConsole("no update url specified","error");}else{window.history.pushState({},title,new_url);}};$.cookie={sidebar_state:"sidebar-expanded",sidebar_selected_item:"sidebar-selected-item",project_selected_tabs:[],no_js:false,setCookie:function(cname,cvalue,exdays){var d=new Date();d.setTime(d.getTime()+(exdays*24*60*60*1000));var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/";},getCookie:function(cname){var name=cname+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' '){c=c.substring(1);} if(c.indexOf(name)==0){return c.substring(name.length,c.length);}} return"";},checkCookie:function(){var user=$.app.getCookie("username");if(user!=""){alert("Welcome again "+user);}else{user=prompt("Please enter your name:","");if(user!=""&&user!=null){$.app.setCookie("username",user,365);}}}};$.app.toConsole=function(msg,level){if(msg!=undefined&&console_on==1){console.log(msg,level);}} $.app.encode_uri=function(param){var x=encodeURI($.app.base64.encode(param));$.app.toConsole("encode uri param ["+param+"]");return x;};$.app.decode_uri=function(param){var x=$.app.base64.decode(decodeURI(param));$.app.toConsole("decode uri param ["+param+"]");return x;};$.app.base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=$.app.base64._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;} output=output+this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);} return output;},decode:function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2);} if(enc4!=64){output=output+String.fromCharCode(chr3);}} output=$.app.base64._utf8_decode(output);return output;},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}} return utftext;},_utf8_decode:function(utftext){var string="";var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++;}else if((c>191)&&(c<224)){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2;}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}} return string;}};$.app.hash=function(str){var hash=0,i,chr;if(str.length===0) return hash;for(i=0;i<str.length;i++){chr=str.charCodeAt(i);hash=((hash<<5)-hash)+chr;hash|=0;} return hash;};$.app.is_json=function(str){try{var json=JSON.parse(str);return(typeof json==='object');}catch(e){return false;}} $.app.highlight=function(element,msg){setTimeout(function(){$('#'+element).animate({backgroundColor:'rgba(0, 150, 0, 0.3)'},function(){$('#glow').css({'-webkit-box-shadow':'0px 0px 5px 5px rgba(0, 150, 0, 0.3)','box-shadow':'0px 0px 5px 5px rgba(0, 150, 0, 0.3)'});});},500);setTimeout(function(){$('#glow').animate({backgroundColor:'rgba(0, 150, 0, 0.0)'},function(){$('#glow').css({'-webkit-box-shadow':'0px 0px 5px 5px rgba(0, 150, 0, 0.0)','box-shadow':'0px 0px 5px 5px rgba(0, 150, 0, 0.0)'});});},1200);};$.app.blockUI=function(element,msg,onBlockCallback,onUnblockCallback){if(msg==null||msg==""){msg=$.lang.item('msg_one_moment_please');} blockMessage='<div class="col-xs-1 no-margin no-padding">'+'<i class="fa fa-1x fa-spinner fa-spin fa-pulse" alt="loading-icon" aria-hidden="true"></i>'+'</div>'+'<div class="col-xs-11 pull-right">'+ msg+'</div>';var opt={message:blockMessage,onBlock:function(){if(onBlockCallback!=undefined&&typeof onBlockCallback=='function'){onBlockCallback();}},onUnblock:function(element,options){$.app.toConsole("blockUI has UN-blocked the content","info");if(onUnblockCallback!=undefined&&typeof onUnblockCallback=='function'){onUnblockCallback(element,options);}},css:{width:'250px',color:'#0090C8',padding:'10px',margin:0,left:'',textAlign:'left',border:'1px solid #0090C8',backgroundColor:'#fff',}};if(element==null||element=="body"||element==".app-container"){opt.css.right="20px";opt.css.top="80px";opt.css.width="350px";} if(element!=null){$(element).block(opt);}else{$.blockUI(opt);}} $.app.unblockUI=function(element){if(element!=null){$(element).unblock();}else{$.unblockUI();}} $.app.generateUUID=function(){var d=new Date().getTime();var uuid='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);return(c=='x'?r:(r&0x3|0x8)).toString(16);});return uuid;};$.app.redirect=function(url){var ua=navigator.userAgent.toLowerCase(),isIE=ua.indexOf('msie')!==-1,version=parseInt(ua.substr(4,2),10);if(isIE&&version<9){var link=document.createElement('a');link.href=url;document.body.appendChild(link);link.click();}else{window.location.href=url;}};$.app.replaceContent=function(content,callback,id,newURI,newURITitle,tag){if(content==undefined||content==""){return;} if(id==undefined){id="content-body";} if(newURI!=undefined){$.app.update_browser_url(newURI,(newURITitle!=undefined?newURITitle:''));} if(tag==undefined){tag="div";} $('#'+id).fadeOut("fast",function(){var cls=$("#"+id).attr("class");var div=$('<'+tag+' id="'+id+'" class="'+cls+'">'+content+'</'+tag+'>');$(this).replaceWith(div);$('#'+id).fadeIn("fast",function(){if(callback!=undefined&&typeof callback=='function'){callback();}});});};$.app.sendAjaxRequest=function(target,params,successHandler,blockUI,blockContainer,blockMessage,handleResultErrors,processData,contentType){if(target==undefined){throw"No target specified";} if(handleResultErrors==undefined){handleResultErrors=$.app.options.ajaxHandleResultErrors} if(blockUI===true){$.app.blockUI(blockContainer,blockMessage);} var ajax_object={type:$.app.options.ajaxMethod,dataType:$.app.options.ajaxDataType,url:target,data:params,contentType:false,processData:false,cache:false,beforeSend:function(){},success:function(result){if(result==undefined){$.dialog.error("Die Anfrage lieferte ein leeres Ergebniss");}else{if(result.error!=null&&result.error!=""&&result.redirect!=null&&result.redirect!=""){$.dialog.error("Es ist ein Fehler aufgetreten",result.error+"<br>",function(){$.app.redirect(result.redirect);});}else if(result.error!=null&&result.error!=""&&handleResultErrors===true){$.dialog.error("Es ist ein Fehler aufgetreten",result.error+"<br>error dialog is auto-generated @see app.js");}else if(result.warning!=null&&result.warning!=""){$.dialog.warning($.lang.item("warning"),result.warning);}else if(result.info!=null&&result.info!=""){$.dialog.info($.lang.item("info"),result.info);}else if(successHandler!=undefined&&successHandler!=null&&typeof(successHandler)==="function"){successHandler(result);}} if(blockUI===true){$.app.unblockUI(blockContainer);}},error:function(xhr,ajaxOptions,thrownError){$.app.toConsole({"fkt":"AJAX error","target":target,"status":xhr.status,"error":thrownError,"options":ajaxOptions,"xhr":xhr},"error");$.dialog.error($.lang.item('request_error'),$.lang.item('error_code')+":"+xhr.status+"  "+$.lang.item('error')+": "+thrownError);if(blockUI===true){$.app.unblockUI(blockContainer);}}};ajax_object.contentType='application/x-www-form-urlencoded; charset=UTF-8';if(contentType!=undefined){ajax_object.contentType=contentType;} ajax_object.processData=true;if(processData!=undefined){ajax_object.processData=processData;} $.ajax(ajax_object);};$.app.setFormValidationStates=function(formID,errorString,errorArray,errorDiv){$.app.toConsole({"fkt":"setFormValidationStates","form":formID,"errorArray":errorArray,"errorString":errorString,"count form groups":$("#"+formID+" .form-group").length});if(!$("#"+formID).length>0){throw new Error('element '+formID+' not found. make sure you have removed the # ?');} $.app.toConsole(" - remove classes from .form-groups ["+$("#"+formID+" .form-group").length+"]");$("#"+formID+" .form-group").each(function(index){$(this).removeClass('has-error');$(this).removeClass('has-warning');$(this).removeClass('has-success');});if($("#"+errorDiv).length>0){$.app.toConsole(" - set errorString to container ["+errorDiv+"]");$("#"+errorDiv).html("");$("#"+errorDiv).css("display","none");if(errorString!=""){$("#"+errorDiv).html(errorString);$("#"+errorDiv).css("display","block");}} $.each(errorArray,function(key,val){$.app.toConsole(" - set error > element ["+key+"] error["+val+"]");if($("#"+formID+" [name=\""+key+"\"]").length>0&&$("#"+formID+" [name=\""+key+"\"]").closest(".form-group").length>0){$("#"+formID+" [name=\""+key+"\"]").closest("#"+formID+" .form-group").addClass('has-error');}else if($("#"+formID+" [name=\""+key+"\"]").length>0){$("#"+formID+" [name=\""+key+"\"]").addClass('has-error');}else{$.app.toConsole(" - !!! ["+key+"] not found ");}});};$.app.datatable={};$.app.datatable.options={deferRender:true,info:true,lengthChange:true,ordering:true,paging:true,processing:true,searching:true,responsive:true,select:false,lengthMenu:[5,15,25,50,100],pageLength:5,pagingType:"full_numbers",renderer:"bootstrap",language:JSON.parse($.lang.item("datatable")),stateSave:true,stateSaveCallback:function(settings,data){localStorage.setItem('DataTables_'+settings.sInstance,JSON.stringify(data));sessionStorage.setItem('DataTables_'+settings.sInstance,JSON.stringify(data));},stateLoadCallback:function(settings){return JSON.parse(localStorage.getItem('DataTables_'+settings.sInstance));}};$.app.datatable.adjust_columns=function(table_obj){if(table_obj!=undefined){table_obj.columns.adjust().draw();}};$.app.datatable.callbacks={initComplete:function(settings,json){$.app.init_toolTips();},rowCallback:function(row,data,index){$(row).find(".dtbt_edit").each(function(){if($(this).attr("onclick")){$(this).removeAttr("href");}});$(row).find(".dtbt_remove").each(function(){if($(this).attr("onclick")){$(this).removeAttr("href");}});}};$.app.datatable.user_settings_changed=function(table_id,table_obj,additional){$.app.toConsole({"fkt":"user_settings_changed","table-id":table_id,"table-obj":table_obj,"additional":additional});var columns_config={};var settings=table_obj.settings();if(settings!=undefined&&settings.aoColumns!=undefined){$.each(settings.aoColumns,function(index,value){columns_config[index]={idx:value.idx,sWidth:value.sWidth,label:value.label,mData:value.mData};});} var state={time:+new Date(),start:settings._iDisplayStart,length:settings._iDisplayLength,order:$.extend(true,[],settings.aaSorting),search:settings.oPreviousSearch,columns:$.map(settings.aoColumns,function(col,i){return{data:col.data,label:col.label,sortable:col.bSortable,visible:col.bVisible,mData:col.mData,searchable:col.bSearchable,filter:col.filter,bSortable:col.bSortable,bVisible:col.bVisible,orderable:col.bOrderable,search:settings.aoPreSearchCols[i],width:col.sWidth,name:col.name};})};if(columns_config[0]!=undefined){var json_config=JSON.stringify(state);$.app.sendAjaxRequest(baseUrl+"home/saveUserTableConfiguration",{table_id:table_id,json_config:json_config,rendermode:"json"},function(result){});}} $.app.datatable.addColumnFilter=function(table_obj,table_id,search_immediatly,callback){if(search_immediatly==undefined){search_immediatly=true;} var search_always_on_focus_out=false;$.app.toConsole({"fkt":"addColumnFilter","table_id":table_id,"table_obj":table_obj});var tbl_selector="#"+table_id if($("#"+table_id).parent().hasClass("dataTables_scrollBody")){tbl_selector="#"+table_id+"_wrapper > .dataTables_scroll > .dataTables_scrollHead > .dataTables_scrollHeadInner > table";} $(tbl_selector+" thead tr:eq(0) th").each(function(){var title=$("#"+table_id+' thead tr:eq(0) th').eq($(this).index()).text();if($(this).hasClass("has-filter")&&title!=""){var filter_input=$('<input type="text" style="z-index:1000; width:100%" placeholder="" class="table-filter" />');$(filter_input).on("click",function(e){e.stopPropagation();});$(this).html(filter_input);}});table_obj.columns().eq(0).each(function(colIdx){$(tbl_selector+' thead tr:eq(0) th:eq('+colIdx+') input').on('keyup',function(event){var keycode=(event.keyCode?event.keyCode:event.which);$.app.toConsole({"fkt":"column filter key-up","table_obj":table_obj,"column-index":colIdx,"key-code":keycode,"search-value":this.value});if(keycode=='13'||search_immediatly===true){table_obj.column(colIdx).search(this.value).draw();}});if(search_immediatly!==true||search_always_on_focus_out===true){$(tbl_selector+' thead tr:eq(0) th:eq('+colIdx+') input').on('focusout',function(event){$.app.toConsole({"fkt":"column filter focus-out","table_obj":table_obj,"column-index":colIdx,"search-value":this.value});if(this.value!=""){table_obj.column(colIdx).search(this.value).draw();}});}});if(callback!=undefined&&typeof callback=="function"){callback();}};$.app.datatable.reset_column_filter=function(tbl_object){var tbl_id=tbl_object.table().node().id;var tbl_selector="#"+tbl_id if($("#"+tbl_id).parent().hasClass("dataTables_scrollBody")){tbl_selector="#"+tbl_id+"_wrapper > .dataTables_scroll > .dataTables_scrollHead > .dataTables_scrollHeadInner > table";} $.app.toConsole({"fkt":"reset_column_filter","table-id":tbl_id});tbl_object.columns().eq(0).each(function(colIdx){var filter=$(tbl_selector+' thead tr:eq(0) th:eq('+colIdx+') .table-filter');$.app.toConsole({"current-val":$(filter).val()});if($(filter).is("select")){$(filter).val("-9999").trigger('change');}else if($(filter).is("input")){$(filter).val("");}});tbl_object.search('',true,false).columns().search('').draw();};$.app.datatable.reload=function(tableID,data){};$.app.datatable.reload_ajax=function(tableObj,url,callback){tableObj.ajax.url(url).load(function(){},true);tableObj.ajax.reload(function(json){if(callback!=undefined&&typeof callback=='function'){callback(json);if($.app.datatable.bFancy===true){$(tableObj).parent().addClass("animated fadeInRight");}}},true);};$.app.datatable.initialize_ajax=function(tableID,url,columns,rowCallback,initComplete,options,append_data_fkt){$.app.toConsole({"fkt":"$.app.datatable.initialize_ajax","tableID":tableID,"url":url,"columns":columns,"rowCallback":rowCallback,"initComplete":initComplete});if(tableID==undefined||url==undefined){throw new Error('table identifier and datasource url required');} var append_data={"table_id":tableID,"rendermode":"JSON"};if(append_data_fkt!=undefined&&typeof append_data_fkt=='function'){append_data_fkt(append_data);} var dt_options={"serverSide":true,"ajax":{url:url,type:"post",error:function(xhr,error,thrown){$.app.toConsole({"fkt":"datatable ajax error","xhr":xhr,"error":error,"thrown":thrown});$.dialog.error("Beim Senden der Anfrage ist ein Fehler aufgetreten","Status-Code ["+xhr.status+"] Error ["+thrown+"]<br><br>"+xhr.responseText);$.app.unblockUI();},data:append_data},"rowCallback":function(row,data,index){if(rowCallback!=undefined&&typeof rowCallback=='function'){rowCallback(row,data,index);}},"initComplete":function(settings,json){if(initComplete!=undefined&&typeof initComplete=='function'){initComplete(settings,json);} if($.app.datatable.bFancy===true){$('#'+tableID).parent().addClass("animated fadeInRight");}},stateSave:$.app.datatable.options.stateSave,"stateSaveCallback":$.app.datatable.options.stateSaveCallback,"stateLoadCallback":$.app.datatable.options.stateLoadCallback,"columns":columns,"autoWidth":false,"deferRender":$.app.datatable.options.deferRender,"info":$.app.datatable.options.info,"lengthChange":$.app.datatable.options.lengthChange,"ordering":$.app.datatable.options.ordering,"paging":$.app.datatable.options.paging,"processing":$.app.datatable.options.processing,"searching":$.app.datatable.options.searching,"responsive":$.app.datatable.options.responsive,"stateSave":$.app.datatable.options.stateSave,"lengthMenu":$.app.datatable.options.lengthMenu,"pageLength":$.app.datatable.options.pageLength,"pagingType":$.app.datatable.options.pagingType,"renderer":$.app.datatable.options.renderer,"language":$.app.datatable.options.language,"order":$.app.datatable.options.order,} if(options!=undefined){$.each(options,function(index,value){dt_options[index]=value;});} if(dt_options.dom!=undefined&&dt_options.dom=="Rlfrtip"){$('#'+tableID).on('column-resize.dt.mouseup',function(event,oSettings){$.app.toConsole({"fkt":"column-resize","event":event,"settings":oSettings});});$('#'+tableID).on('column-reorder.dt.mouseup',function(event,oSettings){if(event.namespace=="dt.mouseup"){$.app.toConsole({"fkt":"column-reorder","event":event,"settings":oSettings});}});} var table=$('#'+tableID).DataTable(dt_options);return table;};$.app.initialize=function(){$.app.toConsole("initialize");$.app.toConsole({"lng":$.lang.language,"datatables":JSON.parse($.lang.item('datatable'))});};$.app.init_autonumeric=function(selector,options){if(selector==undefined){selector=".autonumeric";} var default_options={aSep:$.lang.item('thousands_seperator'),aDec:$.lang.item('decimal_seperator'),dGroup:'3',aSign:'',pSign:'p'};if(options!=undefined){$.each(options,function(index,value){default_options[index]=value;});} if(jQuery().autoNumeric){if($(selector).length>0){$(selector).autoNumeric('destroy');$(selector).autoNumeric('init',options);$.app.toConsole(" - autonumeric initialized");}}else{$.app.toConsole(" - autonumeric plugin NOT FOUND");}} $.app.init_checked_list_box=function(selector){if(selector==undefined){selector=".list-group.checked-list-box .list-group-item";} if($(selector).length>0){$(selector).each(function(){var cb=$(this).find('input:checkbox');var lbl=$(this).find("label").find("span");$(this).find("label").addClass("no-padding");$(this).find('input:checkbox').hide();var checked=(cb.hasClass("active")?"checked":"");var $widget=$(this),$checkbox=$(cb),color=($widget.data('color')?$widget.data('color'):"primary"),style=($widget.data('style')=="button"?"btn-":"list-group-item-"),settings={on:{icon:'glyphicon glyphicon-check'},off:{icon:'glyphicon glyphicon-unchecked'}};$widget.css('cursor','pointer') $widget.append($checkbox);$widget.on('click',function(){if($checkbox.hasClass("disabled")==false){$checkbox.prop('checked',!$checkbox.is(':checked'));$checkbox.triggerHandler('change');}});$checkbox.on('change',function(){updateDisplay();});function updateDisplay(){var isChecked=$checkbox.is(':checked');$widget.data('state',(isChecked)?"on":"off");$widget.find('.state-icon').removeClass().addClass('state-icon '+settings[$widget.data('state')].icon);if(isChecked){$widget.addClass(style+color+' active');}else{$widget.removeClass(style+color+' active');}} function init(){if($widget.data('checked')==true){$checkbox.prop('checked',!$checkbox.is(':checked'));} updateDisplay();if($widget.find('.state-icon').length==0){$widget.find("label").prepend('<span class="state-icon '+settings[$widget.data('state')].icon+'"></span>');}} init();});$.app.toConsole(" - checked list box initialized");}};$.app.init_datepicker=function(selector){if(jQuery().datepicker){if(selector==undefined){selector=".datepicker";} if($(selector).length>0){$(selector).datetimepicker("destroy");$(selector).each(function(){$(this).datetimepicker({language:$.lang.locale,format:$.lang.date_format});});$.app.toConsole(" - dateppicker initialized","log");}}};$.app.init_fileinput=function(selector,upload_url,allowedExt,multiple,onSuccess,onError,minFiles,maxFiles,maxSize,upload_extra,initialPreview,showCaption,showPreview,showRemove,showUpload,showCancel,showClose,showUploadedThumbs){if(jQuery().fileinput){if(selector==undefined){selector="input[name=upload]";} if(upload_url==undefined){$.app.toConsole("no upload url specified for fileinput. Degrading to normal");} if($(selector).length>0){if(allowedExt==undefined){allowedExt=false;} if(multiple==undefined){multiple=false;} if(minFiles==undefined){minFiles=1;} if(maxFiles==undefined){maxFiles=1;} if(maxSize==undefined){maxSize=0;} if(upload_extra==undefined){upload_extra={startUpload:1};} if(showCancel==undefined){showCancel=true;} if(showCaption==undefined){showCaption=true;} if(showClose==undefined){showClose=false;} if(showPreview==undefined){showPreview=true;} var options={language:$.lang.item('locale_short'),uploadUrl:upload_url,error:"error",uploadAsync:false,deleteUrl:"",showCaption:showCaption,showPreview:showPreview,showRemove:showRemove,showUpload:showUpload,showCancel:showCancel,showClose:showClose,showUploadedThumbs:showUploadedThumbs,browseOnZoneClick:true,dropZoneClickTitle:"<br>(oder hier klicken um Dateien auszuwählen)",multiple:multiple,autoReplace:true,minFileCount:minFiles,maxFileCount:maxFiles,maxFileSize:maxSize,allowedFileExtensions:allowedExt,previewSettings:{image:{width:"auto",height:"auto"}},previewClass:"hidden-xs",uploadExtraData:function(){return upload_extra;},layoutTemplates:{main1:'{preview}\n'+'<div class="kv-upload-progress hide"></div>\n'+'<div class="row">'+' <div class="col-xs-12">'+'  <div class="input-group {class} ">\n'+'     {caption}\n'+'   <div id="grp-browse" class="input-group-btn">\n'+'         {browse}\n'+'     </div>\n'+'  </div>'+' </div>'+'</div><br>'+'<div class="row">'+' <div class="col-xs-12">'+'        {upload}\n'+'      {remove}\n'+'   {cancel}\n'+' </div>'+'</div>',actions:'<div class="file-actions">\n'+'    <div class="file-footer-buttons">\n'+'        {delete} {other}'+'    </div>\n'+'    {drag}\n'+'    <div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>\n'+'    <div class="clearfix"></div>\n'+'</div>',},buttonLabelClass:"btn-sm",browseClass:"btn btn-default btn-sm",removeClass:"btn btn-danger btn-sm btn-block",cancelClass:"btn btn-danger btn-sm btn-block",cancelLabel:"Vorgang abbrechen",uploadClass:"btn btn-success btn-sm btn-block"};if(initialPreview!==undefined){options.initialPreview=[initialPreview];} initialPreview,$(selector).fileinput('destroy');$(selector).fileinput(options);var ua=navigator.userAgent.toLowerCase(),isIE=ua.indexOf('msie')!==-1,version=parseInt(ua.substr(4,2),10);if(isIE&&version<9){$("#clear").on("click",function(){$fileInput.replaceWith($fileInput=$fileInput.clone(true));});} $(selector).on('filebatchpreupload',function(event,data,previewId,index){$.app.toConsole({"fkt":"filebatchpreupload","evt":event,"data":data,"previewId":previewId,"index":index});return true;});$(selector).on('filepreupload',function(event,data,previewId,index){$.app.toConsole({"fkt":"filepreupload","evt":event,"data":data,"previewId":previewId,"index":index});return true;});$(selector).on('filecustomerror',function(event,params){$.app.toConsole({"fkt":"filecustomerror","event":event,"abortData":params.abortData,"abortMessage":params.abortMessage});});$(selector).on('filebatchuploadcomplete',function(event,files,extra){$.app.toConsole({"fkt":"filebatchuploadcomplete","evt":event,"files":files,"countFiles":files.length,"extra":extra});});$(selector).on('filebatchuploadsuccess',function(event,data,previewId,index){$.app.toConsole({"fkt":"filebatchuploadsuccess","data":data,"evt":event,"previewID":previewId,"index":index});$(selector).fileinput('reset');$(selector).fileinput('clear');if(onSuccess!=undefined&&typeof onSuccess=='function'){onSuccess();}else{$.dialog.success($.lang.item("upload_success"),$.lang.item("msg_upload_success"),function(){});}});$(selector).on('filebatchuploaderror',function(event,data,previewId,index){$.app.toConsole({"fkt":"filebatchuploaderror","data":data,"evt":event,"previewID":previewId,"index":index});$(selector).fileinput('reset');if(onError!=undefined&&typeof onError=='function'){onError();}else{$.dialog.error($.lang.item("upload_error"),$.lang.item("msg_upload_error")+":<br>"+previewId,function(){$(selector).fileinput('clear');});}});$(selector).on('fileuploaded',function(event,data,previewId,index){$.app.toConsole({"fkt":"fileuploaded","data":data,"evt":event,"previewID":previewId,"index":index});$(selector).fileinput('reset');if(onSuccess!=undefined&&typeof onSuccess=='function'){onSuccess();}else{$.dialog.success($.lang.item("upload_success"),$.lang.item("msg_upload_success"),function(){$(selector).fileinput('clear');});}});$.app.toConsole("upload successfull initialized");$.app.toConsole({"options":options});$.app.toConsole(" - fileinput plugin initialized");}}};$.app.init_toolTips=function(){$("*[title]").each(function(){$(this).tooltip({placement:"top"});});$("*[title_right]").each(function(){$(this).tooltip({placement:"right",title:$(this).attr("title_right")});});$("*[title_left]").each(function(){$(this).tooltip({placement:"left",title:$(this).attr("title_left")});});$("*[title_bottom]").each(function(){$(this).tooltip({placement:"bottom",title:$(this).attr("title_bottom")});});$.app.toConsole(" - tooltips initialized","log");};$.app.init_select2=function(selector){if(jQuery().select2){if(selector==undefined){selector="select";} if($(selector).length>0){$(selector).select2({placeholder:$.lang.please_select,width:"100%",allowClear:false,language:$.lang.locale,theme:"bootstrap",dropdownAutoWidth:true});$.app.toConsole(" - select2 plugin initialized");}}else{$.app.toConsole(" - select2 plugin not loaded !!!");}};$.app.init_toggle=function(selector){if(jQuery().bootstrapToggle){if(selector==undefined){selector=".toggle";} if($(selector).length>0){$(selector).bootstrapToggle('destroy');$(selector).bootstrapToggle();$.app.toConsole(" - bootstraptoggle initialized");}}else{$.app.toConsole(" - toggle plugin not loaded !!!");}};$(document).ready(function(){$.fx.off=true;$.app.toConsole("app.js ready - "+$.app.generateUUID(),"log");$.app.unblockUI("body");$('.modal').remove();try{var key $.app.localStorage={};for(var i=0;i<localStorage.length;i++){key=localStorage.key(i) $.app.localStorage[key]=localStorage.getItem(key);} $.app.toConsole({"sessionStorage":$.app.sessionStorage});$.app.toConsole({"localStorage":$.app.localStorage});}catch(e){$.app.toConsole({"app.js >> catch":e});} $.post(baseUrl+"home/js",{"storage":$.app.localStorage},function(data){$.app.toConsole(" - js support written to session","log");$("body").attr("has-js","1");$("html, body").removeClass("no-js");$("#hint_nojs").remove();});$(window).bind("popstate",function(event){$.app.toConsole("popstate event catched. location.href["+location.href+"]","log");$.app.redirect(location.href)});if($.fn.DataTable!==undefined){$.extend($.fn.dataTable.defaults,$.app.datatable.options);$.extend(true,$.fn.dataTable.defaults,{"language":JSON.parse($.lang.item("datatable"))});$.fn.DataTable.ext.pager.numbers_length=5;$.fn.dataTable.ext.order['dom-input']=function(settings,col){return this.api().column(col,{order:'index'}).nodes().map(function(td,i){return $('input',td).val();});};$.fn.dataTable.ext.order['dom-select']=function(settings,col){return this.api().column(col,{order:'index'}).nodes().map(function(td,i){return $('select option:selected',td).val();});};var org_buildButton=$.fn.DataTable.Buttons.prototype._buildButton;$.fn.DataTable.Buttons.prototype._buildButton=function(config,collectionButton){var button=org_buildButton.apply(this,arguments);$(document).one('init.dt',function(e,settings,json){if(config.container&&$(config.container).length){$(button.inserter[0]).detach().appendTo(config.container);}});return button;}} if($.fn.autoNumeric!==undefined){$.extend($.fn.autoNumeric.defaults,{aSep:$.lang.item('thousands_seperator'),aDec:$.lang.item('decimal_seperator'),dGroup:'3',aSign:'',pSign:'p'});} $.blockUI.defaults={message:'<h1>'+$.lang.item('msg_one_moment_please')+'</h1>',title:$.lang.item('please_wait'),draggable:true,theme:false,cursorReset:'default',iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank',forceIframe:false,baseZ:10000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:30000,showOverlay:true,focusInput:true,focusableElements:':input:enabled:visible',onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:'blockMsg',ignoreIfBlocked:false};$.blockUI.defaults.css={} $.app.init_toolTips();});