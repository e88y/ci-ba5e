if(typeof jQuery==="undefined"){throw new Error("This JavaScript requires jQuery");}$(document).ready(function(){$.app.toConsole("dialogs.js ready","log");});$.dialog={options:{ajaxTargetGeneric:baseUrl+"modal/generic"},error:function(title,content,callback,callback_no,txt_yes,txt_no){txt_yes=(txt_yes==undefined?$.lang.item("ok"):txt_yes);return this.show(title,content,callback,callback_no,"danger",txt_yes,txt_no);},info:function(title,content,callback,callback_no,txt_yes,txt_no){txt_yes=(txt_yes==undefined?$.lang.item("ok"):txt_yes);return this.show(title,content,callback,callback_no,"info",txt_yes,txt_no);},success:function(title,content,callback,callback_no,txt_yes,txt_no){txt_yes=(txt_yes==undefined?$.lang.item("ok"):txt_yes);return this.show(title,content,callback,callback_no,"success",txt_yes,txt_no);},warning:function(title,content,callback,callback_no,txt_yes,txt_no){txt_yes=(txt_yes==undefined?$.lang.item("ok"):txt_yes);return this.show(title,content,callback,callback_no,"warning",txt_yes,txt_no);},standard:function(title,content,callback){return this.show(title,content,callback,callback_no,"default",txt_yes,undefined);},confirm:function(title,content,callback,callback_no,txt_yes,txt_no){txt_yes=(txt_yes==undefined?$.lang.item("yes"):txt_yes);txt_no=(txt_no==undefined?$.lang.item("no"):txt_no);return this.show(title,content,callback,callback_no,"confirm",txt_yes,txt_no,false);},confirm_delete:function(title,content,callback,callback_no,txt_yes,txt_no){txt_yes=(txt_yes==undefined?$.lang.item("yes"):txt_yes);txt_no=(txt_no==undefined?$.lang.item("no"):txt_no);return this.show(title,content,callback,callback_no,"confirm_delete",txt_yes,txt_no,false);},confirm_3:function(title,content,callback,callback_no,txt_yes,txt_no){return this.show(title,content,callback,callback_no,"confirm",txt_yes,txt_no,false);}};$.dialog.show=function(title,content,callback_yes,callback_no,type,txt_yes,txt_no,dismissible,size,callback_open,callback_close){dismissible=(dismissible==undefined?true:dismissible);txt_yes=(txt_yes==undefined?$.lang.item("ok"):txt_yes);var params={id_modal:$.app.generateUUID(),backdrop:"static",color:type,title:title,content:content,txt_yes:txt_yes,txt_no:txt_no,dismissible:dismissible};$.app.sendAjaxRequest($.dialog.options.ajaxTargetGeneric,params,function(result){if(callback_yes!=undefined&&typeof callback_yes=="function"){$(document).on("click","#"+params.id_modal+"-btn-ok",function(){$.app.toConsole("callback-YES fired on #"+params.id_modal);setTimeout(callback_yes,10);});}if(callback_no!=undefined&&typeof callback_no=="function"){$(document).on("click","#"+params.id_modal+"-btn-cancel",function(){$.app.toConsole("callback-NO fired on #"+params.id_modal);setTimeout(callback_no,10);});}$(document).on("hidden.bs.modal","#"+params.id_modal,function(){$(this).data("modal",null);$(this).remove();$.app.toConsole("modal ["+params.id_modal+"] removed from DOM");if(callback_close!=undefined&&typeof callback_close=="function"){callback_close(params.id_modal);}});$(document).on("shown.bs.modal","#"+params.id_modal,function(){$.app.toConsole("modal ["+params.id_modal+"] show");if($("#"+params.id_modal+"-btn-ok").length>0){$("#"+params.id_modal+"-btn-ok").focus();}if($("#"+params.id_modal+"-btn-cancel").length>0){$("#"+params.id_modal+"-btn-cancel").focus();}if(callback_open!=undefined&&typeof callback_open=="function"){callback_open(params.id_modal);}});$(result.data).modal({show:true});});$.app.toConsole("modal ["+params.id_modal+"] generated");return params.id_modal;};$.dialog.from_controller=function(ajax_target,params,callback_shown,callback_close){params.rendermode="AJAX";$.app.toConsole(params);$.app.sendAjaxRequest(ajax_target,params,function(result){$(document).on("shown.bs.modal","#"+params.id_modal,function(){$.app.toConsole("modal ["+params.id_modal+"] show");if(callback_shown!=undefined&&typeof callback_shown=="function"){callback_shown(params.id_modal);}});$(document).on("hidden.bs.modal","#"+params.id_modal,function(){$(this).data("modal",null);$(this).remove();$.app.toConsole("modal ["+params.id_modal+"] removed from DOM");if(callback_close!=undefined&&typeof callback_close=="function"){callback_close(params.id_modal);}});$(result.data).modal({show:true});});$.app.toConsole("modal ["+params.id_modal+"] generated");return params.id_modal;};function dialog_confirm(title,content,callback,callback_no,txt_yes,txt_no){dialog(title,content,callback,callback_no,"confirm",txt_yes,txt_no,false);}function dialog(title,content,callback_yes,callback_no,type,txt_yes,txt_no,dismissable,size){var dataBackdrop="static";var sizes=new Array("sm","lg");var id_modal=$.app.generateUUID();var id_buttonOK=$.app.generateUUID();var id_buttonCancel=$.app.generateUUID();if(type==undefined){type=="success";}if(txt_yes==undefined){txt_yes="OK";}if(txt_no==undefined){txt_no="Abbrechen";}if(size==undefined||sizes[size]==undefined){size=="lg";}var bt_cancel="";if(type=="confirm"){type="warning";dataBackdrop="static";dismissable=false;bt_cancel='<button id="'+id_buttonCancel+'" name="bt_cancel" type="button" class="btn btn-sm " data-dismiss="modal"><i class="fa fa-times"></i></i>&nbsp;'+txt_no+"</button>";}var dismissButton="";if(dismissable===true){dismissButton='<button id="'+id_modal+'-close" title="Fenster schlieÃŸen" type="button" class="close modal-control" data-dismiss="modal" data-target="#'+id_modal+'" ><span class="text-'+type+'"><span class="glyphicon glyphicon-remove-sign"></span></span></button>';}var title_icons=new Array();title_icons["success"]='<i class="fa fa-check"></i>';title_icons["info"]='<i class="fa fa-info-circle"></i>';title_icons["warning"]='<i class="fa fa-warning"></i>';title_icons["danger"]='<i class="fa fa-fire"></i>';title_icons["confirm"]='<i class="fa fa-question"></i>';title_icons["default"]='<i class="fa fa-file"></i>';var title_icon=title_icons[type];var tmpl=['<div id="'+id_modal+'" name="'+id_modal+'" aria-hidden="true" data-backdrop="'+dataBackdrop+'" data-keyboard="false" class="modal modal-message modal-'+type+' fade in " role="dialog">','<div class="modal-dialog">','<div class="modal-content">','<div class="modal-header"><strong class="text-'+type+'">'+title_icon+"&nbsp;&nbsp;"+title+"</strong>"+dismissButton+"</div>",'<div id="'+id_modal+'-body" class="modal-body">'+content+"</div>",'<div class="modal-footer">',bt_cancel,'<button id="'+id_buttonOK+'" name="'+id_buttonOK+'" type="button" class="btn btn-sm btn-'+type+'" data-dismiss="modal"><i class="fa fa-check"></i>&nbsp;'+txt_yes+"</button>","</div>","</div>","</div>","</div>"].join("");$(tmpl).modal({show:true});if(callback_yes!=undefined&&typeof callback_yes=="function"){$(document).on("click","#"+id_buttonOK,callback_yes);}if(callback_no!=undefined&&typeof callback_no=="function"){$(document).on("click","#"+id_buttonCancel,callback_no);}$(document).on("hidden.bs.modal","#"+id_modal,function(){$(this).data("modal",null);$(this).remove();});$.app.toConsole("modal with id: "+id_modal+" generated");}function dialog_fromController(dialogID,target,params,headerText){sendAjaxRequest(target,params,function(result){var dataBackdrop="true";var btn_dismiss='<button id="'+dialogID+'-close" title_left="Fenster schlieÃŸen" class="modal-control" type="button" data-dismiss="modal" data-target="#'+dialogID+'" ><span class="glyphicon glyphicon-remove-sign"></span></button>';var tmpl=['<div id="'+dialogID+'" name="'+dialogID+'" aria-hidden="true" data-backdrop="'+dataBackdrop+'" class="modal modal-message fade in" >','<div class="modal-dialog">','<div class="modal-content">','<div class="modal-header"><i class="fa fa-file"></i>&nbsp<strong>'+headerText+"</strong>"+btn_dismiss+"</div>",'<div class="modal-body slimScroll">'+result.data+"</div>","</div>","</div>","</div>"].join("");$(tmpl).modal("hide");$(document).on("hidden.bs.modal","#"+dialogID,function(){$(this).data("modal",null);$(this).remove();$.app.toConsole("remove modal from DOM");});});}